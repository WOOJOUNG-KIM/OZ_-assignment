<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <title>Admin Page</title>
  <style>
    /* 다크 모드 스타일 */
    .dark-mode {
      background-color: #121212;
      color: white;
    }
    .dark-mode table {
      background-color: #1e1e1e;
    }
  </style>
</head>
<body>
  <div class="container mt-3">
    <!-- 다크 모드 버튼, 오늘 날짜 및 시간 표시 -->
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="mt-5 mb-3">신규 등록 상품</h3>
      <button class="btn btn-secondary" onclick="toggleDarkMode()">🌙 다크 모드</button>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <span id="currentDateTime"></span>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signupModal">회원가입</button>
    </div>

    <!-- 필터링 폼 -->
    <form class="row row-cols-lg-auto g-3 align-items-center">
      <div class="col-12">
        <label class="visually-hidden" for="categorySelect">카테고리 선택</label>
        <select class="form-select" id="categorySelect" onchange="filterProducts()">
          <option value="all">전체</option>
          <option value="상의">상의</option>
          <option value="하의">하의</option>
          <option value="신발">신발</option>
          <option value="패션잡화">패션잡화</option>
        </select>
      </div>
      <div class="col-3">
        <input type="text" class="form-control" id="searchInput" placeholder="상품명 검색" onkeyup="filterProducts()">
      </div>
    </form>

    <!-- 제품 리스트 테이블 -->
    <div class="container mt-3">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>카테고리</th>
            <th>브랜드</th>
            <th>상품명</th>
            <th>가격</th>
          </tr>
        </thead>
        <tbody id="product_data_Table">
        </tbody>
      </table>
    </div>

    <!-- 페이지 네이션 -->
    <nav>
      <ul class="pagination justify-content-center" id="pagination">
      </ul>
    </nav>
  </div>

  <script>
    // 제품 데이터
    const product_data = [
      { category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
      { category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
      { category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
      { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
      { category: "상의", brand: 'Nike', product: '나이키 스우시 맨투맨', price: '89,000' },
      { category: "하의", brand: 'Adidas', product: '아디다스 조거 팬츠', price: '78,000' },
      { category: "신발", brand: 'New Balance', product: '뉴발란스 530', price: '139,000' },
      { category: "패션잡화", brand: 'GUCCI', product: '구찌 카드지갑', price: '490,000' }
    ];

    let filteredData = [...product_data];
    const product_data_Table = document.getElementById('product_data_Table');
    const pagination = document.getElementById('pagination');

    const itemsPerPage = 3;
    let currentPage = 1;

    // 초기 데이터 로드
    function loadTableData(page = 1) {
      product_data_Table.innerHTML = ""; // 기존 데이터 초기화
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedData = filteredData.slice(startIndex, endIndex);

      paginatedData.forEach((item) => {
        const row = product_data_Table.insertRow();
        row.insertCell(0).innerHTML = item.category;
        row.insertCell(1).innerHTML = item.brand;
        row.insertCell(2).innerHTML = item.product;
        row.insertCell(3).innerHTML = item.price;
      });

      setupPagination(filteredData, page);
    }

    // 필터링 기능
    function filterProducts() {
      const category = document.getElementById('categorySelect').value;
      const searchText = document.getElementById('searchInput').value.toLowerCase();

      filteredData = product_data.filter(item => {
        const matchesCategory = category === "all" || item.category === category;
        const matchesSearch = item.product.toLowerCase().includes(searchText);
        return matchesCategory && matchesSearch;
      });

      currentPage = 1;
      loadTableData(currentPage);
    }

    // 페이지네이션 설정
    function setupPagination(data, page) {
      pagination.innerHTML = ""; // 기존 페이지네이션 초기화
      const pageCount = Math.ceil(data.length / itemsPerPage);

      for (let i = 1; i <= pageCount; i++) {
        const li = document.createElement('li');
        li.classList.add('page-item');
        if (i === page) li.classList.add('active');

        const link = document.createElement('a');
        link.classList.add('page-link');
        link.innerText = i;
        link.href = "#";
        link.onclick = (e) => {
          e.preventDefault();
          currentPage = i;
          loadTableData(currentPage);
        };

        li.appendChild(link);
        pagination.appendChild(li);
      }
    }

    // 다크 모드 토글
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    // 실시간 날짜 및 시간 업데이트
    function updateDateTime() {
      const now = new Date();
      const formattedDate = now.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' });
      const formattedTime = now.toLocaleTimeString('ko-KR');
      document.getElementById('currentDateTime').textContent = `📅 ${formattedDate} ⏰ ${formattedTime}`;
    }
    setInterval(updateDateTime, 1000); // 1초마다 업데이트

    // 초기 실행
    loadTableData();
    updateDateTime();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
